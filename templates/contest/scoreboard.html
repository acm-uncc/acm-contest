{% extends 'base.html' %}

{% block title %}
    Scoreboard
{% endblock %}

{% block head %}
    {# Automatically refresh every few seconds #}
    {#    <meta http-equiv="refresh" content="30">#}
{% endblock %}

{% block content %}
    <h1 class="text-center">Scoreboard</h1>

    <table class="table text-center">
        <thead class="thead-dark">
        <tr>
            <th scope="col">#</th>
            <th scope="col">User</th>
            <th scope="col">Score</th>

            {% for problem in problems %}
                <th scope="col">
                    <a href="{% url 'contest:problem' problem.slug %}"
                       class="text-light">
                        {{ problem.title }}</a>
                </th>
            {% endfor %}
        </tr>
        </thead>
        <tbody>
        {% for u in users %}
            <tr>
                <th scope="row">{{ forloop.counter }}</th>
                <td>{{ u.username }}</td>
                <td>{{ u.score.points }}</td>

                {% for problem in problems %}
                    {% if problem in u.score.solved_problems %}
                        <td class="table-success"><i class="fa fa-check text-success"
                                                     aria-hidden="true"></i></td>
                    {% else %}
                        <td class="table-danger"><i class="fa fa-times text-danger"
                                                    aria-hidden="true"></i></td>
                    {% endif %}
                {% endfor %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}